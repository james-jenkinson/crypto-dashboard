(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{424:function(e,t,a){},523:function(e,t,a){},525:function(e,t,a){},531:function(e,t,a){},532:function(e,t,a){},533:function(e,t,a){"use strict";a.r(t);a(216);var r=a(0),n=a.n(r),c=a(208),o=a.n(c),i=a(215),l=a(4);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=a(5),s=a.n(u),m=a(16),d=a(29),p=a(139),f=a.n(p);function h(){return(h=Object(m.a)(s.a.mark((function e(t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.coingecko.com/api/v3/coins/".concat(t,"?tickers=false&community_data=false&developer_data=false&sparkline=false"),e.next=3,f()(a);case 3:if(!((r=e.sent).status>=400)){e.next=10;break}return e.t0=Error,e.next=8,r.text();case 8:throw e.t1=e.sent,new e.t0(e.t1);case 10:return e.abrupt("return",r.json());case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=Object(m.a)(s.a.mark((function e(t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.coingecko.com/api/v3/coins/".concat(t,"/market_chart?vs_currency=usd&days=7"),e.next=3,f()(a);case 3:if(!((r=e.sent).status>=400)){e.next=10;break}return e.t0=Error,e.next=8,r.text();case 8:throw e.t1=e.sent,new e.t0(e.t1);case 10:return e.abrupt("return",r.json());case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E,b={getCoin:function(e){return h.apply(this,arguments)},getMarketData:function(e){return v.apply(this,arguments)}},y=a(37);!function(e){e.Initial="initial",e.Loading="loading",e.Error="error",e.Ready="ready"}(E||(E={}));var _={status:E.Initial,coinData:void 0,coinId:void 0,marketData:void 0,searchHistory:[]},k=function(e,t){switch(t.type){case"FETCH_COIN_START":return Object(y.a)(Object(y.a)({},e),{},{coinId:t.payload.coinId,status:E.Loading,coinData:void 0});case"FETCH_COIN_SUCCESS":return Object(y.a)(Object(y.a)({},e),{},{status:E.Ready,coinData:t.payload.data});case"FETCH_COIN_ERROR":return Object(y.a)(Object(y.a)({},e),{},{status:E.Error});case"UPDATE_SEARCH_HISTORY":return Object(y.a)(Object(y.a)({},e),{},{searchHistory:t.payload.data});case"FETCH_MARKET_DATA_SUCCESS":return Object(y.a)(Object(y.a)({},e),{},{marketData:t.payload.data});default:return e}},g=function(){return Object(r.useReducer)(k,_)},C=function(e){return Object(r.useMemo)((function(){var t;if(null===(t=e.marketData)||void 0===t?void 0:t.prices)return function(e){var t=new Array(e.prices.length),a=new Array(e.prices.length);return e.prices.forEach((function(e,r){a[r]=new Date(e[0]),t[r]=e[1]})),{prices:t,timestamps:a}}(e.marketData)}),[e.marketData])},O=new(a(209).a)("CoinDashboardDatabase");O.version(1).stores({previousSearches:"++_id, &term, timestamp"});var D=O.table("previousSearches"),j=function(){var e=Object(m.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=D.where({term:t}),e.next=3,a.count();case 3:if(e.t0=e.sent,!(e.t0>0)){e.next=9;break}return e.next=7,a.modify({timestamp:Date.now()});case 7:e.next=10;break;case 9:D.add({term:t,timestamp:Date.now()});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){return D.orderBy("timestamp").reverse().toArray()},x=Object(r.createContext)({fetchCoin:function(){},fetchMarketData:function(){},isLoading:!1,hasError:!1,coinId:void 0,pastSearches:[],coin:void 0,marketData:void 0}),S=function(e){var t=g(),a=Object(d.a)(t,2),c=a[0],o=a[1];Object(r.useEffect)((function(){w().then((function(e){e.length&&o({type:"UPDATE_SEARCH_HISTORY",payload:{data:e}})}))}),[]);var i=Object(r.useCallback)(function(){var e=Object(m.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.coinId!==t||!c.coinData){e.next=2;break}return e.abrupt("return");case 2:return o({type:"FETCH_COIN_START",payload:{coinId:t}}),e.prev=3,e.next=6,b.getCoin(t);case 6:a=e.sent,j(t).then(Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t=e.sent,o({type:"UPDATE_SEARCH_HISTORY",payload:{data:t}});case 4:case"end":return e.stop()}}),e)})))),o({type:"FETCH_COIN_SUCCESS",payload:{coinId:t,data:a}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),o({type:"FETCH_COIN_ERROR",payload:{coinId:t,error:e.t0}});case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),[c.coinId,c.coinData]),l=Object(r.useCallback)(function(){var e=Object(m.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.coinId!==t||!c.marketData){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,b.getMarketData(t);case 5:a=e.sent,o({type:"FETCH_MARKET_DATA_SUCCESS",payload:{data:a}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),[c.coinId,c.marketData]),u=function(e){return Object(r.useMemo)((function(){if(e.coinData)return function(e){var t,a,r,n,c;return{name:e.name,image:null===(t=e.image)||void 0===t?void 0:t.thumb,symbol:e.symbol,currentPriceUsd:"$".concat(null===(a=e.market_data)||void 0===a||null===(r=a.current_price)||void 0===r?void 0:r.usd),marketCapRank:e.market_cap_rank,percentagePriceChange24h:null===(n=e.market_data)||void 0===n?void 0:n.price_change_percentage_24h,positiveChange:(null===(c=e.market_data)||void 0===c?void 0:c.price_change_percentage_24h)>=0}}(e.coinData)}),[e.coinData])}(c),p=C(c),f={fetchCoin:i,fetchMarketData:l,isLoading:c.status===E.Loading,hasError:c.status===E.Error,pastSearches:c.searchHistory,coin:u,coinId:c.coinId,marketData:p};return n.a.createElement(x.Provider,{value:f},e.children)},I=(a(424),function(){var e=Object(r.useContext)(x).coin;if(!e)return null;var t=e.positiveChange?"coin-details__price-indicator--positive":"coin-details__price-indicator--negative";return n.a.createElement(n.a.Fragment,null,n.a.createElement("table",null,n.a.createElement("caption",null,"Details for ",e.name,n.a.createElement("img",{alt:"Logo for ".concat(e.name),src:e.image})),n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Marketcap rank"),n.a.createElement("td",null,e.marketCapRank)),n.a.createElement("tr",null,n.a.createElement("th",null,"Name"),n.a.createElement("td",null,e.name)),n.a.createElement("tr",null,n.a.createElement("th",null,"Price (USD)"),n.a.createElement("td",{className:t},e.currentPriceUsd)),n.a.createElement("tr",null,n.a.createElement("th",null,"Symbol"),n.a.createElement("td",null,e.symbol)),n.a.createElement("tr",null,n.a.createElement("th",null,"Price change over last 24 hours"),n.a.createElement("td",{className:t},e.percentagePriceChange24h)))))}),R=a(102),T=a(213),A=a(141),H=(a(523),function(){var e=Object(r.useContext)(x),t=e.fetchCoin,a=e.fetchMarketData,c=e.hasError,o=e.coinId,i=Object(R.b)({resolver:Object(T.yupResolver)(Object(A.a)({currency:Object(A.b)().required("please enter a coin identifier")}))}),l=i.handleSubmit,u=i.register,s=i.errors;return n.a.createElement("form",{onSubmit:l((function(e){t(e.currency),a(e.currency)})),"aria-label":"fetch-currency"},n.a.createElement("div",{className:"fetch-currency-form__body"},n.a.createElement("label",{id:"label-currency",className:"form-input__label"},"Currency",n.a.createElement("span",{"aria-hidden":!0},"*")),n.a.createElement("input",{name:"currency",className:"form-input__input","aria-labelledby":"label-currency","aria-required":!0,ref:u}),s.currency&&n.a.createElement("span",{role:"alert","aria-label":"currency-error"},s.currency.message)),n.a.createElement("button",{type:"submit"},"Submit"),c&&n.a.createElement("div",{role:"alert","aria-label":"api-error"},"Unable to find details for ",o))}),N=(a(525),function(e){return n.a.createElement(n.a.Fragment,null,e.isLoading&&n.a.createElement("div",{className:"loading-indicator","aria-label":"loading"}))}),P=a(214),U=a.n(P),F=function(){var e=Object(r.useContext)(x),t=e.marketData,a=e.coin;return t&&a?n.a.createElement("div",{role:"graphics-document"},n.a.createElement(U.a,{data:[{x:null===t||void 0===t?void 0:t.timestamps,y:null===t||void 0===t?void 0:t.prices,type:"scatter",mode:"lines+markers",marker:{color:"red"}}],layout:{width:800,height:600,title:"Changes in ".concat(null===a||void 0===a?void 0:a.name," over last 7 days")}})):null},M=function(){var e=Object(r.useContext)(x).pastSearches;return n.a.createElement("div",null,n.a.createElement("h2",null,"Past searches"),n.a.createElement("ul",null,e.map((function(e){return n.a.createElement("li",{key:e.term},e.term)}))))};a(531);var L=function(){var e=Object(r.useContext)(x),t=e.isLoading,a=e.coin;return n.a.createElement("div",{className:"home"},n.a.createElement("h1",null,"Search for details for a coin"),n.a.createElement("div",{className:"home__fetch-currency-form"},n.a.createElement(H,null),n.a.createElement(M,null)),(null===a||void 0===a?void 0:a.name)&&n.a.createElement("h1",{"aria-label":"coin-details-heading"},"Details of ",a.name),n.a.createElement("div",{className:"home__coin-details"},n.a.createElement(N,{isLoading:t}),n.a.createElement(I,null),n.a.createElement(F,null)))},B={routes:{home:"".concat("/crypto-dashboard","/")}};a(532);function Y(){return n.a.createElement(S,null,n.a.createElement(i.a,null,n.a.createElement(l.c,null,n.a.createElement(l.a,{path:B.routes.home,element:n.a.createElement(L,null)}))))}o.a.render(n.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[533,1,2]]]);
//# sourceMappingURL=main.8d5af6e0.chunk.js.map